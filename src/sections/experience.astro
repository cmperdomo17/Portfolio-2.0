---
import { useTranslations } from "@/i18n/utils";

const currentLang = Astro.currentLocale || "en";

const translateLabels = useTranslations(currentLang as "en" | "es");
---

<section id="experience" class="sections-separator">
  <div class="container">
    <!-- Section Header -->
    <div class="text-start md:text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">
        <span
          class="text-5xl font-extrabold bg-gradient-to-r from-primary to-white text-transparent bg-clip-text"
        >
          {translateLabels("experience.title")}
        </span>
      </h2>
      <p class="text-gray-300 max-w-2xl mx-auto">
        {translateLabels("experience.description")}
      </p>
    </div>

    <!-- Timeline Container -->
    <div class="relative max-w-4xl mx-auto">
      <!-- Vertical Line -->
      <div
        class="absolute left-0 md:left-1/2 transform md:-translate-x-1/2 h-full w-1 bg-primary/30 rounded-3xl"
      >
      </div>

      <!-- Timeline Items -->
      <div class="timeline-items space-y-12">
        <!-- Item 1 -->
        <div class="timeline-item">
          <div class="md:flex items-center">
            <div class="md:w-1/2 pr-12 hidden md:block text-right">
              <div
                class="bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex flex-row-reverse items-center mb-3">
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full ml-3"
                  >
                    {translateLabels("experience.item1.role")}
                  </span>
                  <h3 class="text-xl font-bold ml-auto text-right">
                    {translateLabels("experience.item1.title")}
                  </h3>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center justify-end gap-2"
                >
                  <i class="ri-building-4-line"></i>
                  {translateLabels("experience.item1.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item1.description")}
                </p>
                <div class="flex flex-wrap gap-2 justify-end">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag3")}
                  </span>
                </div>
              </div>
            </div>
            <div
              class="absolute left-0 md:left-1/2 transform -translate-y-1/4 md:-translate-x-1/2 w-6 h-6 rounded-full border-4 border-primary bg-slate-900 z-10"
            >
            </div>
            <div class="md:w-1/2 md:pl-12 ml-8 md:ml-0">
              <span class="block md:hidden text-primary font-semibold mb-1">
                {translateLabels("experience.item1.date")}
              </span>
              <div
                class="md:hidden bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary/20 timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex items-center mb-3">
                  <h3 class="text-xl font-bold mr-auto">
                    {translateLabels("experience.item1.title")} - {
                      translateLabels("experience.item1.company")
                    }
                  </h3>
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.role")}
                  </span>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center gap-2"
                >
                  <i class="ri-building-4-line"></i>
                  {translateLabels("experience.item1.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item1.description")}
                </p>
                <div class="flex flex-wrap gap-2">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item1.tag3")}
                  </span>
                </div>
              </div>
              <span class="hidden md:block text-primary font-semibold mb-1">
                {translateLabels("experience.item1.date")}
              </span>
            </div>
          </div>
        </div>

        <!-- Item 2: Mobility Management System - ORII (2025) -->
        <div class="timeline-item">
          <div class="md:flex items-center">
            <div class="hidden md:block md:w-1/2 pr-12 text-right">
              <span class="block text-primary font-semibold mb-1">
                {translateLabels("experience.item2.date")}
              </span>
            </div>
            <div
              class="absolute left-0 md:left-1/2 transform -translate-y-1/4 md:-translate-x-1/2 w-6 h-6 rounded-full border-4 border-primary bg-slate-900 z-10"
            >
            </div>
            <div class="md:w-1/2 md:pl-12 ml-8 md:ml-0">
              <span class="block md:hidden text-primary font-semibold mb-1">
                {translateLabels("experience.item2.date")}
              </span>
              <div
                class="bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex items-center mb-3">
                  <h3 class="text-xl font-bold mr-auto">
                    {translateLabels("experience.item2.title")}
                  </h3>
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item2.role")}
                  </span>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center gap-2"
                >
                  <i class="ri-building-4-line"></i>
                  {translateLabels("experience.item2.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item2.description")}
                </p>
                <div class="flex flex-wrap gap-2">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item2.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item2.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item2.tag3")}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Item 3: Environmental Management System (2025) -->
        <div class="timeline-item">
          <div class="md:flex items-center">
            <div class="md:w-1/2 pr-12 hidden md:block text-right">
              <div
                class="bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex flex-row-reverse items-center mb-3">
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full ml-3"
                  >
                    {translateLabels("experience.item3.role")}
                  </span>
                  <h3 class="text-xl font-bold ml-auto text-right">
                    {translateLabels("experience.item3.title")}
                  </h3>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center justify-end gap-2"
                >
                  <i class="ri-building-4-line"></i>
                  {translateLabels("experience.item3.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item3.description")}
                </p>
                <div class="flex flex-wrap gap-2 justify-end">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag3")}
                  </span>
                </div>
              </div>
            </div>
            <div
              class="absolute left-0 md:left-1/2 transform -translate-y-1/4 md:-translate-x-1/2 w-6 h-6 rounded-full border-4 border-primary bg-slate-900 z-10"
            >
            </div>
            <div class="md:w-1/2 md:pl-12 ml-8 md:ml-0">
              <span class="block md:hidden text-primary font-semibold mb-1">
                {translateLabels("experience.item3.date")}
              </span>
              <div
                class="md:hidden bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary/20 timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex items-center mb-3">
                  <h3 class="text-xl font-bold mr-auto">
                    {translateLabels("experience.item3.title")}
                  </h3>
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.role")}
                  </span>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center gap-2"
                >
                  <i class="ri-building-4-line"></i>
                  {translateLabels("experience.item3.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item3.description")}
                </p>
                <div class="flex flex-wrap gap-2">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item3.tag3")}
                  </span>
                </div>
              </div>
              <span class="hidden md:block text-primary font-semibold mb-1">
                {translateLabels("experience.item3.date")}
              </span>
            </div>
          </div>
        </div>

        <!-- Item 4: Alura Challenge - Oracle Next Education (2024) -->
        <div class="timeline-item">
          <div class="md:flex items-center">
            <div class="hidden md:block md:w-1/2 pr-12 text-right">
              <span class="block text-primary font-semibold mb-1">
                {translateLabels("experience.item4.date")}
              </span>
            </div>
            <div
              class="absolute left-0 md:left-1/2 transform -translate-y-1/4 md:-translate-x-1/2 w-6 h-6 rounded-full border-4 border-primary bg-slate-900 z-10"
            >
            </div>
            <div class="md:w-1/2 md:pl-12 ml-8 md:ml-0">
              <span class="block md:hidden text-primary font-semibold mb-1">
                {translateLabels("experience.item4.date")}
              </span>
              <div
                class="bg-background/50 backdrop-blur-sm p-6 rounded-lg border border-primary timeline-content opacity-0 transform translate-y-8"
              >
                <div class="flex items-center mb-3">
                  <h3 class="text-xl font-bold mr-auto">
                    {translateLabels("experience.item4.title")}
                  </h3>
                  <span
                    class="bg-primary/20 text-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item4.role")}
                  </span>
                </div>
                <h4
                  class="text-white/80 font-medium mb-3 flex items-center gap-2"
                >
                  {translateLabels("experience.item4.company")}
                </h4>
                <p class="text-gray-400 mb-4">
                  {translateLabels("experience.item4.description")}
                </p>
                <div class="flex flex-wrap gap-2">
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item4.tag1")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item4.tag2")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item4.tag3")}
                  </span>
                  <span
                    class="bg-background/70 border border-primary text-xs px-3 py-1 rounded-full"
                  >
                    {translateLabels("experience.item4.tag4")}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Intersection Observer for Timeline Animation
    document.addEventListener("DOMContentLoaded", () => {
      const timelineContents = document.querySelectorAll(".timeline-content");

      const observer = new IntersectionObserver(
        (entries, observer) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const el = entry.target as HTMLElement;
              el.style.opacity = "1";
              el.style.transform = "translateY(0)";
              el.style.transition = "opacity 0.5s ease, transform 0.7s ease";
              observer.unobserve(entry.target);
            }
          });
        },
        { threshold: 0.2 }
      );

      timelineContents.forEach((content) => {
        observer.observe(content);
      });
    });
  </script>
</section>
